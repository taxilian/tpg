# Simple Task Template
#
# Lightweight template for non-TDD work.
# Provides context and constraints for a competent engineer to solve a problem.
#
# Usage:
#   tpg add "Add config validation" --template simple-task --vars-yaml <<'EOF'
#   task_name: "Add config validation"
#   objective: "Validate config on startup, fail fast on invalid values"
#   acceptance_criteria: |
#     - Invalid config fails at startup with clear error
#     - Valid configs continue to work normally
#   context: |
#     Currently invalid configs are silently ignored, causing runtime errors later.
#     This makes debugging difficult for users.
#   constraints: |
#     - Must not break existing valid configs
#     - Error messages must be actionable
#   EOF

title: "Simple Task"
description: "Lightweight template for non-TDD work"

variables:
  task_name:
    description: "Short task title"
  objective:
    description: "elevator pitch, verifiable goal"
  acceptance_criteria:
    description: "Criteria for success / how we know when it's done"
  context:
    description: "Background information to assist with making decisions"
    optional: true
    default: ""
  constraints:
    description: "Hard constraints that must be followed"
    optional: true
    default: ""
  unknowns:
    description: "Open questions or decisions that need resolution"
    optional: true
    default: ""

steps:
  - id: task
    title: "{{.task_name}}"
    description: |
      ## Objective

      {{.objective}}

      ## Acceptance Criteria

      Before marking this complete, verify:

      {{.acceptance_criteria}}
      {{- if hasValue .context}}

      ## Context

      {{.context}}
      {{- end}}
      {{- if hasValue .constraints}}

      ## Constraints

      These are mandatory. If you cannot satisfy a constraint, log the blocker
      and create a follow-up task rather than violating it.

      {{.constraints}}
      {{- end }}
      {{- if hasValue .unknowns}}

      ## Unknowns / Decisions

      {{.unknowns}}

      When you make a decision, log it immediately with `tpg log`.
      {{- end}}
